# Social Web Application

ç¤¾ç¾¤ç¶²ç«™æ‡‰ç”¨ï¼Œå¯¦ç¾äº†åŸºæ–¼ç¤¾ç¾¤çš„åŠŸèƒ½ï¼Œä»¥åŠå„ªåŒ–çš„ä½¿ç”¨è€…é«”é©—ã€‚

### å‰ç«¯æŠ€è¡“

- **Next.js 15.2.3** (React 19)
- **TailwindCSS**
- **Shadcn UI**
- **Framer Motion**
- **React Query**
- **Clerk** (OAuth)

### å¾Œç«¯æ¶æ§‹

- **Prisma ORM**
- **PostgreSQL**
- **WebSocket**

### éƒ¨ç½²æœå‹™

- **Vercel**

- **Supabase**

## å·²å®ŒæˆåŠŸèƒ½

### 1. è²¼æ–‡ç³»çµ±

- å®Œæ•´çš„ CRUD æ“ä½œæ”¯æŒ
- å³æ™‚äº’å‹•ï¼ˆæŒ‰è®šï¼‰è¨ˆæ•¸æ›´æ–°
- å·¢ç‹€ç•™è¨€æ¶æ§‹

### 2. å·¢ç‹€ç•™è¨€ç³»çµ±

ç‰¹è‰²ï¼šä½¿ç”¨ Closure Table æ¨¡å¼å¯¦ç¾æ¨¹ç‹€çµæ§‹

- æ”¯æŒç„¡é™å±¤ç´šçš„ç•™è¨€åµŒå¥—
- O(1) è¤‡é›œåº¦æŸ¥è©¢

### 3. è¿½è¹¤ç³»çµ±

- ç”¨æˆ¶é—œä¿‚ç®¡ç†
- é‡è¤‡è¿½è¹¤é˜²è­·

### 4. å¤šåª’é«”åŠŸèƒ½

- å¤šåœ–ç‰‡ä¸Šå‚³å’Œé è¦½ç³»çµ±
- åœ–ç‰‡å„ªåŒ–å’Œå£“ç¸®
- é›²ç«¯å„²å­˜æ•´åˆ

### 5. å³æ™‚è¨Šæ¯ç³»çµ±

- WebSocket å³æ™‚é€šè¨Š
- é›¢ç·šè¨Šæ¯è™•ç†
- è¨Šæ¯ç™¼é€ç‹€æ…‹è¿½è¹¤

## é–‹ç™¼ä¸­åŠŸèƒ½ ğŸš§

ä»¥ä¸‹åŠŸèƒ½æ­£åœ¨ç©æ¥µé–‹ç™¼ä¸­ï¼š

### 3. åˆ†äº«åŠŸèƒ½

- è²¼æ–‡åˆ†äº«æ©Ÿåˆ¶
- åˆ†äº«çµ±è¨ˆå’Œè¿½è¹¤
- è·¨å¹³å°åˆ†äº«æ”¯æ´

### 4. å³æ™‚é€šçŸ¥ç³»çµ±

æ¡ç”¨ WebSocket å¯¦ç¾å³æ™‚æ¨é€ï¼š

- å¤šé¡å‹é€šçŸ¥æ”¯æ´ï¼ˆæŒ‰è®šã€è¿½è¹¤ç­‰ï¼‰
- å·²è®€ç‹€æ…‹åŒæ­¥

## æŠ€è¡“å¯¦ç¾é‡é»

### è³‡æ–™åº«å„ªåŒ–

1. Closure Table å¯¦ç¾

```sql
-- é«˜æ•ˆèƒ½çš„æ¨¹ç‹€æŸ¥è©¢çµæ§‹
CREATE TABLE comment_closure (
    ancestor_id   UUID,
    descendant_id UUID,
    depth         INT,
    PRIMARY KEY (ancestor_id, descendant_id)
);
```

2. æ•ˆèƒ½å„ªåŒ–æªæ–½

- äº¤æ˜“å®Œæ•´æ€§ä¿è­‰
- è»Ÿåˆªé™¤æ©Ÿåˆ¶

## æœ¬åœ°é–‹ç™¼

### ç’°å¢ƒéœ€æ±‚

- Node.js >= 18
- PostgreSQL >= 14
- npm >= 9

### å¿«é€Ÿé–‹å§‹

1. å®‰è£ä¾è³´

```bash
npm install
```

2. ç’°å¢ƒè¨­ç½®

```bash
# .env
DATABASE_URL="postgresql://..."
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
```

3. å•Ÿå‹•é–‹ç™¼ç’°å¢ƒ

```bash
npm run dev
```

### é–‹ç™¼å·¥å…·

```bash
# Prisma ç›¸é—œå‘½ä»¤
npm run prisma:generate    # ç”Ÿæˆ Prisma Client
npm run prisma:migrate     # åŸ·è¡Œè³‡æ–™åº«é·ç§»
npm run prisma:studio     # å•Ÿå‹• Prisma Studio
```
